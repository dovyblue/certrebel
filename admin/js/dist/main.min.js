jQuery(document).ready(function(e){function a(){e(".header").fadeOut(0,"linear"),i.addClass("is-visible"),n.removeClass("is-selected").addClass("hidden"),r.removeClass("is-selected").addClass("hidden"),o.removeClass("is-selected").addClass("hidden"),l.removeClass("hidden").addClass("is-selected"),$address=e(this),$attendee_id=$address.closest(".middle-box").data("attendee_id"),$address_field=$address.parent().siblings(".load-data-info"),l.find('input[type="submit"]').on("click",function(a){var d={attendee_id:$attendee_id,attendee_address1:e("input[id=attendee-address1]").val(),attendee_address2:e("input[id=attendee-address2]").val(),attendee_city:e("input[id=attendee-city]").val(),attendee_state_name:e("input[id=attendee-state_name]").val(),attendee_zip:e("input[id=attendee-zip]").val()};a.preventDefault(),e.ajax({type:"POST",url:"/forms/update/update_address.php",data:d,dataType:"json",encode:!0}).done(function(a){l.find("input[id=attendee-address1]").removeClass("has-error").next("span").removeClass("is-visible"),l.find("input[id=attendee-city]").removeClass("has-error").next("span").removeClass("is-visible"),l.find("input[id=attendee-state_name]").removeClass("has-error").next("span").removeClass("is-visible"),l.find("input[id=attendee-zip]").removeClass("has-error").next("span").removeClass("is-visible"),"error"==a.status&&(l.find("input[id=attendee-address1]").addClass("has-error").next("span").addClass("is-visible"),l.find("input[id=attendee-city]").addClass("has-error").next("span").addClass("is-visible"),l.find("input[id=attendee-state_name]").addClass("has-error").next("span").addClass("is-visible"),l.find("input[id=attendee-zip]").addClass("has-error").next("span").addClass("is-visible")),"error"==a.status.address&&l.find("input[id=attendee-address1]").addClass("has-error").next("span").addClass("is-visible"),"error"==a.status.city&&l.find("input[id=attendee-city]").addClass("has-error").next("span").addClass("is-visible"),"error"==a.status.state&&l.find("input[id=attendee-state_name]").addClass("has-error").next("span").addClass("is-visible"),"error"==a.status.zip&&l.find("input[id=attendee-zip]").addClass("has-error").next("span").addClass("is-visible"),"success"==a.status&&(null===localStorage.getItem("update")?localStorage.setItem("update",$update_val):localStorage.setItem("update",$update_val++),$attendee_address2=""==e("input[id=attendee-address2]").val()?"":", "+e("input[id=attendee-address2]").val(),$attendee_address1=e("input[id=attendee-address1]").val(),$attendee_city=e("input[id=attendee-city]").val(),$attendee_state_name=e("input[id=attendee-state_name]").val(),$attendee_zip=e("input[id=attendee-zip]").val(),$attendee_address=$attendee_address1+$attendee_address2+", "+$attendee_city+", "+$attendee_state_name+", "+$attendee_zip,$address_field.html($attendee_address).css("textTransform","capitalize"),l.find("input[id=attendee-address1]").removeClass("has-error").next("span").removeClass("is-visible"),l.find("input[id=attendee-city]").removeClass("has-error").next("span").removeClass("is-visible"),l.find("input[id=attendee-state_name]").removeClass("has-error").next("span").removeClass("is-visible"),l.find("input[id=attendee-zip]").removeClass("has-error").next("span").removeClass("is-visible"),i.removeClass("is-visible"),e(".header").fadeIn(0,"linear"))})})}function d(){e('input[id="attendee-DOB"]').mask("99/99/9999"),e(".header").fadeOut(0,"linear"),i.addClass("is-visible"),r.removeClass("is-selected").addClass("hidden"),l.removeClass("is-selected").addClass("hidden"),o.removeClass("is-selected").addClass("hidden"),n.removeClass("hidden").addClass("is-selected"),$DOB=e(this),$attendee_id=$DOB.closest(".middle-box").data("attendee_id"),$attendee_field=$DOB.parent().siblings(".load-data-info"),n.find('input[type="submit"]').on("click",function(a){var d={attendee_DOB:e("input[id=attendee-DOB]").val(),attendee_id:$attendee_id};a.preventDefault(),e.ajax({type:"POST",url:"/forms/update/update_DOB.php",data:d,dataType:"json",encode:!0}).done(function(a){"error"==a.status?n.find("input[id=attendee-DOB]").addClass("has-error").next("span").addClass("is-visible"):(null===localStorage.getItem("update")?localStorage.setItem("update",$update_val):localStorage.setItem("update",$update_val++),$attendee_field.html(e("input[id=attendee-DOB]").val()),n.find("input[id=attendee-DOB]").removeClass("has-error").next("span").removeClass("is-visible"),i.removeClass("is-visible"),e(".header").fadeIn(0,"linear"))})})}function s(){e(".header").fadeOut(0,"linear"),i.addClass("is-visible"),n.removeClass("is-selected").addClass("hidden"),l.removeClass("is-selected").addClass("hidden"),o.removeClass("is-selected").addClass("hidden"),r.removeClass("hidden").addClass("is-selected"),$company=e(this),$attendee_id=$company.closest(".middle-box").data("attendee_id"),$order_number=$company.closest(".middle-box").data("order_number"),$company_field=$company.parent().siblings(".load-data-info"),r.find('input[type="submit"]').on("click",function(a){var d={buyer_company:e("input[id=buyer-company]").val(),order_number:$order_number,attendee_id:$attendee_id};a.preventDefault(),e.ajax({type:"POST",url:"/forms/update/update_company.php",data:d,dataType:"json",encode:!0}).done(function(a){"error"==a.status?r.find("input[id=buyer-company]").addClass("has-error").next("span").addClass("is-visible"):(null===localStorage.getItem("update")?localStorage.setItem("update",$update_val):localStorage.setItem("update",$update_val++),$company_field.html(e("input[id=buyer-company]").val()),$company_field.css("textTransform","capitalize"),r.find("input[id=buyer-company]").removeClass("has-error").next("span").removeClass("is-visible"),i.removeClass("is-visible"),e(".header").fadeIn(0,"linear"))})})}function t(){e('input[id="attendee-phone"]').mask("(999) 999-9999"),e(".header").fadeOut(0,"linear"),i.addClass("is-visible"),n.removeClass("is-selected").addClass("hidden"),l.removeClass("is-selected").addClass("hidden"),r.removeClass("is-selected").addClass("hidden"),o.removeClass("hidden").addClass("is-selected"),$phone=e(this),$attendee_id=$phone.closest(".middle-box").data("attendee_id"),$order_number=$phone.closest(".middle-box").data("order_number"),$phone_field=$phone.parent().siblings(".load-data-info"),o.find('input[type="submit"]').on("click",function(a){var d={attendee_phone:e("input[id=attendee-phone]").val(),attendee_id:$attendee_id};a.preventDefault(),e.ajax({type:"POST",url:"/forms/update/update_phone.php",data:d,dataType:"json",encode:!0}).done(function(a){"error"==a.status?o.find("input[id=attendee-phone]").addClass("has-error").next("span").addClass("is-visible"):(null===localStorage.getItem("update")?localStorage.setItem("update",$update_val):localStorage.setItem("update",$update_val++),$phone_field.html(e("input[id=attendee-phone]").val()),o.find("input[id=attendee-phone]").removeClass("has-error").next("span").removeClass("is-visible"),i.removeClass("is-visible"),e(".header").fadeIn(0,"linear"))})})}null===localStorage.getItem("update")&&($update_val=0),e(".middle-box li").on("mouseenter",function(){$div=e(this).find("div"),$div.hasClass("load-address")&&e(this).find("div.load-address").removeClass("hidden"),$div.hasClass("DOB")&&e(this).find("div.DOB").removeClass("hidden"),$div.hasClass("load-phone")&&e(this).find("div.load-phone").removeClass("hidden"),$div.hasClass("load-company")&&e(this).find("div.load-company").removeClass("hidden")}),e(".middle-box li").on("mouseleave",function(){$div=e(this).find("div"),$div.hasClass("load-address")&&e(this).find("div.load-address").addClass("hidden"),$div.hasClass("DOB")&&e(this).find("div.DOB").addClass("hidden"),$div.hasClass("load-phone")&&e(this).find("div.load-phone").addClass("hidden"),$div.hasClass("load-company")&&e(this).find("div.load-company").addClass("hidden")});var i=e(".cd-user-modal"),n=i.find("#cd-DOB"),l=i.find("#cd-address"),r=i.find("#cd-company"),o=i.find("#cd-phone"),p=(i.find("#cd-reset-password"),e(".cd-switcher"),e(".DOB"));load_address=e(".load-address"),load_company=e(".load-company"),load_phone=e(".load-phone"),p.on("click",".cd-DOB",d),load_address.on("click",".cd-address",a),load_company.on("click",".cd-company",s),load_phone.on("click",".cd-phone",t),i.on("click",function(a){(e(a.target).is(i)||e(a.target).is(".cd-close-form"))&&(i.removeClass("is-visible"),e(".header").fadeIn(0,"linear"))}),e(document).keyup(function(a){"27"==a.which&&(i.removeClass("is-visible"),e(".header").fadeIn(0,"linear"))}),Modernizr.input.placeholder||(e("[placeholder]").focus(function(){var a=e(this);a.val()==a.attr("placeholder")&&a.val("")}).blur(function(){var a=e(this);""!=a.val()&&a.val()!=a.attr("placeholder")||a.val(a.attr("placeholder"))}).blur(),e("[placeholder]").parents("form").submit(function(){e(this).find("[placeholder]").each(function(){var a=e(this);a.val()==a.attr("placeholder")&&a.val("")})}))}),jQuery.fn.putCursorAtEnd=function(){return this.each(function(){if(this.setSelectionRange){var e=2*$(this).val().length;this.focus(),this.setSelectionRange(e,e)}else $(this).val($(this).val())})};